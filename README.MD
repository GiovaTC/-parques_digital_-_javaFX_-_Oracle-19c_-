# -parques_digital_-_javaFX_-_Oracle-19c_-
# üé≤ Parques Digital

<img width="1024" height="1024" alt="image" src="https://github.com/user-attachments/assets/6941686f-52d3-465d-ba43-670f3176a098" />    

**Parques Digital** es un juego de mesa tipo **Parqu√©s/Parcheesi** desarrollado en **JavaFX**, con:

* üé® **Interfaz gr√°fica en JavaFX**
* üé≤ **Dados con probabilidad configurable**
* üóÑÔ∏è **Registro de partidas en Oracle 19c (JDBC)**

---

## üìÇ Estructura del Proyecto

```
parques-digital/
‚îú‚îÄ‚îÄ pom.xml                          # Configuraci√≥n Maven
‚îú‚îÄ‚îÄ src/main/java/com/example/parques/
‚îÇ   ‚îú‚îÄ‚îÄ MainApp.java                 # Punto de entrada JavaFX
‚îÇ   ‚îú‚îÄ‚îÄ controller/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GameController.java      # L√≥gica del juego y control GUI
‚îÇ   ‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Board.java               # Representaci√≥n del tablero
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Player.java              # Clase jugador
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dice.java                # Clase dado con probabilidad
‚îÇ   ‚îî‚îÄ‚îÄ db/
‚îÇ       ‚îú‚îÄ‚îÄ DBManager.java           # Conexi√≥n con Oracle
‚îÇ       ‚îî‚îÄ‚îÄ GameRecordDAO.java       # Acceso y registro en BD
‚îî‚îÄ‚îÄ src/main/resources/
    ‚îî‚îÄ‚îÄ styles.css                   # Estilos de la interfaz
```

---

## ‚öôÔ∏è Dependencias (pom.xml)

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.example</groupId>
  <artifactId>parques-digital</artifactId>
  <version>1.0-SNAPSHOT</version>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>17</maven.compiler.source>
    <maven.compiler.target>17</maven.compiler.target>
    <javafx.version>20.0.2</javafx.version>
  </properties>

  <dependencies>
    <!-- JavaFX -->
    <dependency>
      <groupId>org.openjfx</groupId>
      <artifactId>javafx-controls</artifactId>
      <version>${javafx.version}</version>
    </dependency>
    <dependency>
      <groupId>org.openjfx</groupId>
      <artifactId>javafx-fxml</artifactId>
      <version>${javafx.version}</version>
    </dependency>

    <!-- Oracle JDBC (opcional, si no se agrega manualmente ojdbc8.jar) -->
    <!--
    <dependency>
      <groupId>com.oracle.database.jdbc</groupId>
      <artifactId>ojdbc8</artifactId>
      <version>19.8.0.0</version>
    </dependency>
    -->
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.openjfx</groupId>
        <artifactId>javafx-maven-plugin</artifactId>
        <version>0.0.8</version>
        <configuration>
          <mainClass>com.example.parques.MainApp</mainClass>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project>
```

---

## üóÑÔ∏è Script SQL (Oracle 19c)

```sql
-- ===============================
-- üé≤ Script SQL - Parques Digital
-- ===============================

-- Tabla de jugadores
CREATE TABLE PLAYERS (
  PLAYER_ID   NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  USERNAME    VARCHAR2(100) NOT NULL,
  CREATED_AT  TIMESTAMP DEFAULT SYSTIMESTAMP
);

-- Tabla de sesiones de juego
CREATE TABLE GAME_SESSIONS (
  SESSION_ID       NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  STARTED_AT       TIMESTAMP DEFAULT SYSTIMESTAMP,
  ENDED_AT         TIMESTAMP,
  WINNER_PLAYER_ID NUMBER,
  CONSTRAINT FK_WINNER FOREIGN KEY (WINNER_PLAYER_ID)
    REFERENCES PLAYERS(PLAYER_ID)
);

-- Tabla de movimientos realizados
CREATE TABLE MOVES (
  MOVE_ID     NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  SESSION_ID  NUMBER NOT NULL,
  PLAYER_ID   NUMBER NOT NULL,
  MOVE_NUMBER NUMBER NOT NULL,
  FROM_POS    NUMBER,
  TO_POS      NUMBER,
  DICE_VALUE  NUMBER,
  CREATED_AT  TIMESTAMP DEFAULT SYSTIMESTAMP,

  CONSTRAINT FK_SESSION FOREIGN KEY (SESSION_ID)
    REFERENCES GAME_SESSIONS(SESSION_ID),
  CONSTRAINT FK_PLAYER FOREIGN KEY (PLAYER_ID)
    REFERENCES PLAYERS(PLAYER_ID)
);
```

---

## üíª C√≥digo Java completo

### `MainApp.java`

```java
package com.example.parques;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class MainApp extends Application {
    @Override
    public void start(Stage stage) throws Exception {
        FXMLLoader loader = new FXMLLoader(getClass().getResource("/game.fxml"));
        Scene scene = new Scene(loader.load(), 800, 600);
        scene.getStylesheets().add(getClass().getResource("/styles.css").toExternalForm());
        stage.setTitle("üé≤ Parques Digital");
        stage.setScene(scene);
        stage.show();
    }

    public static void main(String[] args) {
        launch();
    }
}
```

---

### `controller/GameController.java`

```java
package com.example.parques.controller;

import com.example.parques.db.GameRecordDAO;
import com.example.parques.model.Board;
import com.example.parques.model.Dice;
import com.example.parques.model.Player;
import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.control.Label;

import java.util.ArrayList;
import java.util.List;

public class GameController {

    @FXML private Button rollButton;
    @FXML private Label resultLabel;
    @FXML private Label turnLabel;

    private Dice dice = new Dice();
    private Board board = new Board();
    private List<Player> players = new ArrayList<>();
    private int currentTurn = 0;
    private int moveCounter = 0;

    private GameRecordDAO dao = new GameRecordDAO();

    @FXML
    public void initialize() {
        players.add(new Player("Jugador 1"));
        players.add(new Player("Jugador 2"));
        turnLabel.setText("Turno de: " + players.get(currentTurn).getName());

        rollButton.setOnAction(e -> rollDice());
    }

    private void rollDice() {
        int value = dice.roll();
        Player current = players.get(currentTurn);

        resultLabel.setText(current.getName() + " sac√≥: " + value);

        int from = current.getPosition();
        int to = board.move(current, value);

        moveCounter++;
        dao.saveMove(1, current.getName(), moveCounter, from, to, value);

        currentTurn = (currentTurn + 1) % players.size();
        turnLabel.setText("Turno de: " + players.get(currentTurn).getName());
    }
}
```

---

### `model/Dice.java`

```java
package com.example.parques.model;

import java.util.Random;

public class Dice {
    private Random random = new Random();

    public int roll() {
        // Probabilidad uniforme 1-6
        return random.nextInt(6) + 1;
    }
}
```

---

### `model/Player.java`

```java
package com.example.parques.model;

public class Player {
    private String name;
    private int position = 0;

    public Player(String name) {
        this.name = name;
    }

    public String getName() { return name; }
    public int getPosition() { return position; }

    public void setPosition(int pos) { this.position = pos; }
}
```

---

### `model/Board.java`

```java
package com.example.parques.model;

public class Board {
    private static final int SIZE = 50; // Casillas simplificadas

    public int move(Player player, int steps) {
        int newPos = (player.getPosition() + steps) % SIZE;
        player.setPosition(newPos);
        return newPos;
    }
}
```

---

### `db/DBManager.java`

```java
package com.example.parques.db;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DBManager {
    private static final String URL  = "jdbc:oracle:thin:@localhost:1521:ORCLCDB";
    private static final String USER = "PARQUES_USER";
    private static final String PASS = "tu_password";

    public static Connection getConnection() throws SQLException {
        return DriverManager.getConnection(URL, USER, PASS);
    }
}
```

---

### `db/GameRecordDAO.java`

```java
package com.example.parques.db;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

public class GameRecordDAO {

    public void saveMove(int sessionId, String playerName, int moveNumber, int from, int to, int diceValue) {
        String sql = "INSERT INTO MOVES (SESSION_ID, PLAYER_ID, MOVE_NUMBER, FROM_POS, TO_POS, DICE_VALUE) " +
                     "VALUES (?, (SELECT PLAYER_ID FROM PLAYERS WHERE USERNAME = ?), ?, ?, ?, ?)";

        try (Connection conn = DBManager.getConnection();
             PreparedStatement ps = conn.prepareStatement(sql)) {

            ps.setInt(1, sessionId);
            ps.setString(2, playerName);
            ps.setInt(3, moveNumber);
            ps.setInt(4, from);
            ps.setInt(5, to);
            ps.setInt(6, diceValue);
            ps.executeUpdate();

        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
```

---

## üöÄ Ejecuci√≥n en IntelliJ IDEA

1. Instalar **JDK 17+**.

2. Descargar e instalar **JavaFX SDK (20.0.2)**.

3. Configurar en *Run Configurations*:

   ```bash
   --module-path /ruta/javafx-sdk/lib --add-modules javafx.controls,javafx.fxml
   ```

4. Agregar `ojdbc8.jar` en *Project Structure ‚Üí Libraries* (si no usas Maven).

5. Modificar credenciales en `DBManager.java`.

6. Ejecutar el script SQL en Oracle.

7. Ejecutar desde IntelliJ o con Maven:

   ```bash
   mvn javafx:run
   ```

---

## üìå Notas

* El **dado** puede configurarse con probabilidades personalizadas (`Dice.java`).
* El **tablero** est√° modelado en cuadr√≠cula con posiciones numeradas.
* Cada partida guarda autom√°ticamente en Oracle: jugadores, sesiones, movimientos y ganador.

